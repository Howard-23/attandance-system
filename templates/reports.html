{% extends 'base.html' %}

{% block title %}Reports - Attendance System{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Attendance Reports</h1>
    <button class="btn btn-primary" onclick="exportReport()">
        <i class="fas fa-download"></i> Export to CSV
    </button>
</div>

<!-- Filters -->
<div class="card">
    <div class="card-header">
        <h3><i class="fas fa-filter"></i> Report Filters</h3>
    </div>
    <div class="card-body">
        <div class="filter-row">
            <div class="form-group">
                <label for="reportStartDate">Start Date</label>
                <input type="date" id="reportStartDate" class="form-control">
            </div>
            <div class="form-group">
                <label for="reportEndDate">End Date</label>
                <input type="date" id="reportEndDate" class="form-control">
            </div>
            <div class="form-group">
                <label for="reportEmployee">Employee</label>
                <select id="reportEmployee" class="form-control">
                    <option value="">All Employees</option>
                </select>
            </div>
            <div class="form-group btn-group">
                <button class="btn btn-primary" onclick="generateReport()">
                    <i class="fas fa-search"></i> Generate Report
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Summary Cards -->
<div class="stats-grid" id="summaryCards" style="display: none;">
    <div class="stat-card">
        <div class="stat-icon bg-blue">
            <i class="fas fa-calendar"></i>
        </div>
        <div class="stat-info">
            <h3 id="summaryTotalDays">0</h3>
            <p>Total Days</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon bg-green">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-info">
            <h3 id="summaryPresentDays">0</h3>
            <p>Present Days</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon bg-red">
            <i class="fas fa-times-circle"></i>
        </div>
        <div class="stat-info">
            <h3 id="summaryAbsentDays">0</h3>
            <p>Absent Days</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon bg-purple">
            <i class="fas fa-clock"></i>
        </div>
        <div class="stat-info">
            <h3 id="summaryAvgHours">0h</h3>
            <p>Avg Work Hours</p>
        </div>
    </div>
</div>

<!-- Employee Summary -->
<div class="card" id="employeeSummaryCard" style="display: none;">
    <div class="card-header">
        <h3><i class="fas fa-users"></i> Employee Summary</h3>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table" id="employeeSummaryTable">
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Name</th>
                        <th>Department</th>
                        <th>Total Days</th>
                        <th>Present</th>
                        <th>Absent</th>
                        <th>Total Hours</th>
                        <th>Avg Hours/Day</th>
                        <th>Attendance %</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Detailed Records -->
<div class="card" id="detailedRecordsCard" style="display: none;">
    <div class="card-header">
        <h3><i class="fas fa-list"></i> Detailed Records</h3>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table" id="detailedRecordsTable">
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Date</th>
                        <th>Check In</th>
                        <th>Check Out</th>
                        <th>Work Hours</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- No Data Message -->
<div class="empty-state" id="noDataMessage">
    <i class="fas fa-chart-bar"></i>
    <h3>No Report Generated</h3>
    <p>Select date range and click "Generate Report" to view attendance data.</p>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/reports.js') }}"></script>
{% endblock %}
